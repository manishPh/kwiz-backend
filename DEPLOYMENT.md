# Kwiz Backend Deployment Guide

## Railway Deployment (Django API)

### Step 1: Generate Secret Key
```bash
python generate_secret_key.py
```
Copy the SECRET_KEY value for Railway environment variables.

### Step 2: Push to GitHub
```bash
git add .
git commit -m "Backend deployment ready"
git push origin main
```

### Step 3: Railway Setup
1. Go to [railway.app](https://railway.app)
2. Sign up/login with your GitHub account
3. Click "New Project"
4. Select "Deploy from GitHub repo"
5. Choose your **kwiz-backend** repository
6. Railway auto-detects Django project

### Step 4: Add Database
1. In Railway dashboard, click "New" → "Database" → "PostgreSQL"
2. This automatically sets DATABASE_URL environment variable

### Step 5: Environment Variables
In Railway dashboard, add:
```
SECRET_KEY=your-generated-secret-key-from-step-1
DEBUG=False
```

### Step 6: Custom Domain (Optional)
1. In Railway dashboard → Settings → Domains
2. Add custom domain: `api.kwiz.fun`
3. Update DNS records as instructed

## API Endpoints
Once deployed, your API will be available at:
- `https://your-app.railway.app/api/quiz/daily/2024-01-15/`
- `https://your-app.railway.app/api/quiz/submit/`
- `https://your-app.railway.app/admin/`

## Frontend Integration
Update your frontend's Railway environment variables:
```
REACT_APP_API_URL=https://your-backend.railway.app
```

## All-Railway Setup
- **Backend**: This repository → Railway
- **Frontend**: kwiz-frontend repository → Railway
- **Domain**: Point kwiz.fun to frontend Railway app
- **API**: Frontend calls backend via Railway internal URLs

### Step 4: Domain Configuration
1. In Railway dashboard, go to your project
2. Click on "Settings" → "Domains"
3. Add custom domain: `kwiz.fun`
4. Railway will provide DNS instructions

### Step 5: DNS Configuration
In your domain registrar (where you bought kwiz.fun):
1. Add CNAME record: `www` → `your-app.railway.app`
2. Add A record: `@` → Railway's IP (they'll provide this)

### Step 6: Frontend API Configuration
Update your React app to use the production API URL:
- Development: `http://localhost:8000`
- Production: `https://kwiz.fun`

## Environment Variables Needed:
- `SECRET_KEY`: Django secret key (generate a new one for production)
- `DEBUG`: Set to `False` for production
- `DATABASE_URL`: Auto-generated by Railway PostgreSQL

## Post-Deployment Checklist:
- [ ] Test all quiz functionality
- [ ] Verify timer system works
- [ ] Check localStorage stats
- [ ] Test social sharing
- [ ] Verify admin panel access

## Troubleshooting:
- Check Railway logs for any errors
- Ensure all environment variables are set
- Verify DNS propagation (can take up to 24 hours)
